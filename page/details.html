<!DOCTYPE HTML
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<!-- saved from url=(0044)http://localhost:8080/HouseRent/page/add.jsp -->
<HTML xmlns="http://www.w3.org/1999/xhtml">

<HEAD>
  <TITLE>惠民小家租房网 -房屋详情</TITLE>
  <META content="text/html; charset=utf-8" >
   
  
  <link rel="stylesheet" type="text/css" href="../css/stylexiang.css" />
  <link rel="stylesheet" type="text/css" href="../css/ShopShow.css" />
  <link rel="stylesheet" type="text/css" href="../css/MagicZoom.css" />
  
  <script type="text/javascript" src="../js/vue.min.js"></script>
  <script type="text/javascript" src="../js/axios.min.js"></script>
  <script type="text/javascript" src="../js/vue-router.min.js"></script>
  
  <script type="text/javascript" src="../js/jquery-1.12.4.js"></script>
  <script type="text/javascript" src="../js/clipboard.min.js"></script>
  
  <script type="text/javascript" src="../js/MagicZoom.js"></script>
  <script type="text/javascript" src="../js/ShopShow.js"></script>
  <script type="text/javascript" src="../js/baseUrl.js"></script>

  <style>
    #outer{
        width: 200px;
        height: 200px;
        border: 1px solid rgb(124, 123, 123);
        margin:0 auto;
        overflow: hidden;
    }
    .move{
        width: 1200px;
        height: 200px;
        background-color:rgb(124, 123, 123);
        
        animation-name: move;
        animation-duration: 12s;
        animation-timing-function: steps(6);
        animation-iteration-count: infinite;
    }
    .move div{
        width: 200px;
        height: 200px;
        float: left;
        color: #fff;
        font-size: 30px;
    }

    @keyframes move{
        from{
            margin-left: 0px;
        }
        to{
            margin-left: -1200px;
        }
    }
</style>
</HEAD>

<BODY>
  <div id="app">

    <!--Begin Header Begin-->
    <!--Begin 所在地区 Begin-->
    <span class="s_city_b">
      <span class="fl">我的位置[</span>
      <span class="s_city">
        <span><span style="color: #ff4e00;"><em>{{Sheng.name}}</em><em>{{stemp.name}}</em></span>]</span>
        <div class="s_city_bg">
          <div class="s_city_t"></div>
          <div class="s_city_c">
            <h2>请选择所在地区</h2>
            <table border=0 class="c_tab" style="width:235px; margin-top:10px;" cellspacing="0" cellpadding="0">
              <tr>
                <th>A</th>
                <td class="c_h"><span @click="dians(12)">安徽</span><span @click="dians(27)">澳门</span></td>
              </tr>
              <tr>
                <th>B</th>
                <td class="c_h"><span @click="dians(34)">北京</span></td>
              </tr>
              <tr>
                <th>C</th>
                <td class="c_h"><span @click="dians(13)">重庆</span></td>
              </tr>
              <tr>
                <th>F</th>
                <td class="c_h"><span @click="dians(18)">福建</span></td>
              </tr>
              <tr>
                <th>G</th>
                <td class="c_h"><span @click="dians(2)">广东</span><span @click="dians(20)">广西</span>
                  <span @click="dians(9)">贵州</span><span @click="dians(28)">甘肃</span>
                </td>
              </tr>
              <tr>
                <th>H</th>
                <td class="c_h">
                  <span @click="dians(25)">河北</span><span @click="dians(3)">河南</span>
                  <span @click="dians(1)">黑龙江</span><br><span @click="dians(16)">海南</span>
                  <span @click="dians(7)">湖北</span><span @click="dians(15)">湖南</span>
                </td>
              </tr>
              <tr>
                <th>J</th>
                <td class="c_h"><span @click="dians(21)">江苏</span><span @click="dians(30)">吉林</span>
                  <span @click="dians(23)">江西</span></td>
              </tr>
              <tr>
                <th>L</th>
                <td class="c_h"><span @click="dians(6)">辽宁</span></td>
              </tr>
              <tr>
                <th>N</th>
                <td class="c_h"><span @click="dians(4)">内蒙古</span><span @click="dians(19)">宁夏</span></td>
              </tr>
              <tr>
                <th>Q</th>
                <td class="c_h"><span @click="dians(17)">青海</span></td>
              </tr>
              <tr>
                <th>S</th>
                <td class="c_h"><span @click="dians(10)">上海</span><span @click="dians(11)">山东</span>
                  <span @click="dians(32)">山西</span>
                  <span @click="dians(29)">四川</span><span @click="dians(8)">陕西</span>
                </td>
              </tr>
              <tr>
                <th>T</th>
                <td class="c_h"><span @click="dians(24)">台湾</span><span @click="dians(31)">天津</span></td>
              </tr>
              <tr>
                <th>X</th>
                <td class="c_h"><span @click="dians(14)">西藏</span><span @click="dians(26)">香港</span>
                  <span @click="dians(5)">新疆</span>
                </td>
              </tr>
              <tr>
                <th>Y</th>
                <td class="c_h"><span @click="dians(33)">云南</span></td>
              </tr>
              <tr>
                <th>Z</th>
                <td class="c_h"><span @click="dians(22)">浙江</span></td>
              </tr>
            </table>
          </div>
        </div>
      </span>
    </span>
    <!--End 所在地区 End-->
    <div class="soubg">
      <div class="sou">
        <span class="fr">
          
          <span class="fl ss_list" style="height: 35px;">
            
            {{message}}<i v-show="uid!='null'&&uid!=null">
              <div v-if='ulogo=="null"' id=logologo class="fl"><IMG src="../images/logo.png" width="25" height="25"></div>
                <div v-if='ulogo!="null"' class="fl" ><IMG style="border-radius:12px;" :src="nginxUrl+'toplogo/'+ulogo.logopath"  width="25" height="25"></div>
                
              <a href="#" style="color:limegreen">{{myName}}</a>
              </i>
              <i v-show="uid=='null'||uid==null">你好，请<a href="login.html">登录</a><a href="regs.html"
                style="color:#ff4e00;">免费注册</a>
              </i>
              <div class="ss_list_bgu" v-show="uid!='null'&&uid!=null">
              <div class="s_city_t"></div>
              <div class="ss_list_c">
                <ul>
                  <li><a  @click='goupdaeuser(uid)'>修改个人资料</a></li>
                  <li><a href="login.html">切换账号</a></li>
                  <li><a @click="exitLogin()">退出登录</a></li>
                </ul>
              </div>
            </div>
          </span>
          <span class="ss">
            <div class="ss_list">
              <a href="#">我的关注</a>
              <div class="ss_list_bg">
                <div class="s_city_t"></div>
                <div class="ss_list_c">
                  <ul>
                    <li v-for='gz in guanzhumers'>
                      <a  @click='gomerlist(gz.id)'>{{gz.name}}</a>
                      <hidden  :vlaue='gz.name' :id='"mername"+gz.id' >
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="ss_list">
              <a href="#">客户服务</a>
              <div class="ss_list_bg">
                <div class="s_city_t"></div>
                <div class="ss_list_c">
                  <ul>
                    <li><a href="regsmer.html">商家注册</a></li>
                    <li><a href="loginmer.html">商家登录</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="ss_list">
              <a href="#">网站导航</a>
              <div class="ss_list_bg">
                <div class="s_city_t"></div>
                <div class="ss_list_c">
                  <ul>
                    <li><a href="https://www.douyin.com" target="_blank">抖音官网</a></li>
                    <li><a href="https://www.baidu.com" target="_blank">百度搜索</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </span>
          <span class="fl">|&nbsp;关注我们：<a @click='golist()'>[首页]</a></span>
          <div class="ss_list">
            <span class="s_sh"><a href="#" class="sh2">微信</a></span>
            <div class="ss_list_bg">
              <div class="s_city_t"></div>
              <div class="ss_list_c">
                <ul>
                  <li><a href="http://www.58.com">咨询</a></li>
                  <li><a href="#">woaini20200728</a></li>
                </ul>
              </div>
            </div>
          </div>
          <!-- <span class="fr">|&nbsp;<a href="#">手机版&nbsp;<img src="images/s_tel.png" align="absmiddle" /></a></span>-->
        </span>
      </div>
    </div>


    
    <DIV id=header class="fl">
      <DIV id=logologo class="fl"><IMG src="../images/logo.png" width="120" height="80"></DIV>
      <p class="fr">惠民小家</p>
    </DIV>

    <!--商品详情-->
    <!--End Menu End-->
    <div class="i_bg">
      <div class="postion">
        <span class="">全部 > 房东直租 > 户型 >  {{hobj.title}}</span>
      </div>
      <div class="content fl">

        <div id="tsShopContainer" >
       
           <div id="tsImgS" ><a href="addImg[0]"  class="MagicZoom" id="MagicZoom">
           
              <img :src="addImg[0]" width="430" height="350" />
              </a>
            </div>
  
          <div id="tsPicContainer">
            <div id="tsImgSArrL" onclick="tsScrollArrLeft()"></div>
            <div id="tsImgSCon">
              <ul>
                <li @click=showPic(index) v-for="(item,index) in addImg" :key="index" rel="MagicZoom" class="tsSelectImg  fl">
                  <img :src="item" :tsImgS="item" width="130" height="79" />
                  </li>
              </ul>
            </div>
            <div id="tsImgSArrR" onclick="tsScrollArrRight()"></div>
          </div>

         <img v-if="addImg[0]!=null&&addImg[0]!='null'" class="MagicZoomLoading" src="../images/loading.gif" alt="Loading..." />
 
       
        </div>
        
        
     
      
        <div class="pro_des fl">
          <div class="des_name">
            <h4></span>->[<a @click='gomerlist(hobj.userId)' target="_blank">进入商家</a>]</h4>
            <hidden  v-model='brandNAME' :id="'mername'+hobj.userId" />
          </div>
          <div class="des_price">
            <p>{{hobj.title}}</p>
            价格：<b>￥{{hobj.price}}/月</b><br />
            面积：<span>{{hobj.floorage}}平方</span>
          </div>
          <div class="des_choice">
            <span class="fl">房屋户型：</span>
            <ul>
              <li v-if='hobj.typeId==t.id' v-for='t in types'>
                {{t.name}}<div class="ch_img"></div>
              </li>          
            </ul>
          </div>
          <div class="des_choice">
            <span class="fl">房源地址：</span>
            <ul>
              <li>{{Sheng.name}}>{{stemp.name}}>{{xtemp.name}}>{{ztemp.name}}><div class="ch_img"></div>
              </li>
              
            </ul>
          </div>
          <div class="des_share">
            <div class="d_sh">
              链接已复制-分享
              <div class="d_sh_bg">
                <a href="https://video.kuaishou.com"class="btn1" :data-clipboard-text="copyurl"><img src="../images/kuaishou.jpg" /></a>
                <a href="https://qzone.qq.com/"class="btn2" :data-clipboard-text="copyurl"><img src="../images/sh_2.gif" /></a>
                <a href="https://weibo.com/"class="btn3" :data-clipboard-text="copyurl"><img src="../images/sh_3.gif" /></a>
                <a href="https://www.renren.com/"class="btn4" :data-clipboard-text="copyurl"><img src="../images/sh_4.gif" /></a>
                <a href="https://www.douyin.com/"class="btn5" :data-clipboard-text="copyurl"><img src="../images/douyin.jpg" /></a>
              </div>
            </div>
            <div class="d_care"><a class="d_careA" @click="ShowDivA()">关注</a><a class="d_careB" @click="ShowDivBB()">取消&nbsp;&nbsp;&nbsp;&nbsp;</a>&nbsp;{{good}}</div>
          </div>
          <div class="des_join">
     
            <span class="fl" style="font-size:20px;color:orangered"><a href="#"><img src="../images/login/s_tel.png" /></a>{{hobj.contact}}</span>
          </div>
        </div>

        <div class="s_brand fl">
          <div class="s_brand_img"><img src="../images/login/logbg.jpg" width="188" height="132" /></div>
          <div class="s_brand_c"><a href="#">进入品牌专区</a></div>
          <div id="outer">
            <div class="move">
              <div v-for="h in gghouses">
               
                  <a @click="tiaoDhtml(h.id)" target="_blank">
                      <img :src="nginxUrl+h.path.split(',').slice(-1)" width=198px height=200px alt="">
                    </a>
  
              </div>
                
            </div>
        </div>
        </div>


      </div>

      <!--具体详情及评论-->
      <div class="des_border">
        <div class="des_tit">
          <ul>
            <li class="current"><a href="#p_attribute">房屋属性</a></li>
            <li><a href="#p_details">房屋详情</a></li>
            <li><a href="#p_comment">房屋评论</a></li>
          </ul>
        </div>
        <div class="des_con" id="p_attribute">

          <table border="0" align="center" style="width:100%; font-family:'宋体'; margin:10px auto;" cellspacing="0"
            cellpadding="0">
            <tr>
              <td>房屋标题：{{hobj.title}}</td>
              <td>房屋编号：GB{{hobj.id}}CN{{hobj.streetId}}</td>
              <td>品牌： {{brandNAME}}</td>
              <td>发布时间：{{fmtdate(hobj.pubdate,'yyyy-MM-dd')}} </td>
            </tr>
            <tr>
              <td>房屋面积：{{hobj.floorage}}㎡</td>
              <td>房屋地址：{{Sheng.name}}>{{stemp.name}}>{{xtemp.name}}>{{ztemp.name}}</td>
              <td>简介：环境舒适、拎包入住、生活便捷</td>
              <td>&nbsp;</td>
            </tr>
            <tr>
              <td>月租范围：￥{{hobj.price}}/月</td>
              <td>类型： 
                <span v-if='hobj.typeId==t.id' v-for='t in types'>{{t.name}} </span>
             </td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            </tr>
          </table>


        </div>
      </div>

      <div class="des_border" id="p_details">
        <div class="des_t">房屋详情</div>
        <div class="des_con">
          <table border="0"  style="width:1280px; font-size:14px; font-family:'宋体';text-indent:30px ;" cellspacing="0"
            cellpadding="0">
            <tr>
              <td width="700" >
                <div id="tsImgS" v-for='item in uploadvideo'>
                 <!--短视频展示-->
                    <video id="video" :src="item" class="video" width="700" height="490" 
                  controls="controls"  preload autoplay controls loop muted></video>               
                   </div>
    
              </td>
              <td>
                <h4>&nbsp;&nbsp;{{hobj.title}}</h4><br /><br />
                &nbsp;&nbsp;【房屋类型】：<span v-if='hobj.typeId==t.id' v-for='t in types'>{{t.name}} </span><br /><br />
                &nbsp;&nbsp;【房屋面积】：{{hobj.floorage}}㎡<br /><br />
                &nbsp;&nbsp;【房屋简介】：环境舒适、拎包入住、生活便捷<br /><br />
                &nbsp;&nbsp;【发布日期】：与{{brandNAME}}同步更新<br /><br />
                &nbsp;&nbsp;【房屋地址】：{{Sheng.name}}>{{stemp.name}}>{{xtemp.name}}>{{ztemp.name}}<br /><br />
                &nbsp;&nbsp;【房屋内饰】：干净整洁功能齐全-见图<br /><br />
                &nbsp;&nbsp;【适合人群】：适合外出工作的朋友<br />
              </td>
            </tr>
          </table>

            <table border="0"  style="width:1200px; font-size:14px; font-family:'宋体';margin-top:10px;" cellspacing="10"
            cellpadding="20">
               <tr  v-for="(item,index) in addImg" :key="index" >  
                  <td>  <img :src="item"  width="700" height="400" /></td>
                  <td style="text-indent:30px ;text-align-last: left;">{{hobj.description}} </td> 
                <tr> 
            </table>

        </div>
      </div>

      <div class="des_border" id="p_comment">
        <div class="des_t">房屋评论</div>

        <table border="0" class="jud_tab" cellspacing="0" cellpadding="0">
          <tr>
            <td width="175" class="jud_per">
              <p>80.0%</p>好评度
            </td>
            <td width="300">
              <table border="0" style="width:100%;" cellspacing="0" cellpadding="0">
                <tr>
                  <td width="90">好评<font color="#999999">（80%）</font>
                  </td>
                  <td><img src="../images/pl.gif" align="absmiddle" /></td>
                </tr>
                <tr>
                  <td>中评<font color="#999999">（20%）</font>
                  </td>
                  <td><img src="../images/pl.gif" align="absmiddle" /></td>
                </tr>
                <tr>
                  <td>差评<font color="#999999">（0%）</font>
                  </td>
                  <td><img src="../images/pl.gif" align="absmiddle" /></td>
                </tr>
              </table>
            </td>
            <td width="185" class="jud_bg">
              租赁过{{hobj.title}}的租客，在住进{{hobj.title}}一周才可以对该房屋发表评论
            </td>
            <td class="jud_bg">您可对已租赁过{{hobj.title}}进行评价<br /><a href="#"><img src="../images/btn_jud.gif" /></a></td>
          </tr>
        </table>



        <table border="0" class="jud_list" style="width:100%; margin-top:30px;" cellspacing="0" cellpadding="0">
          <tr valign="top">
            <td width="160"><img src="../images/peo1.jpg" width="20" height="20" align="absmiddle" />&nbsp;向死而生</td>
            <td width="180">
              房屋类型：<font color="#999999"><span v-if='hobj.typeId==t.id' v-for='t in types'>{{t.name}} </span></font>  <br />
              <!--

                
              -->
              房屋面积：<font color="#999999">{{hobj.floorage}}㎡</font>
            </td>
            <td>
              房屋周边环境很好，内饰也很喜欢，必须给赞。 <br />
              <font color="#999999">{{dateone}}</font>
            </td>
          </tr>
          <tr valign="top">
            <td width="160"><img src="../images/peo2.jpg" width="20" height="20" align="absmiddle" />&nbsp;就是这么想的</td>
            <td width="180">
              房屋类型：<font color="#999999">一室两厅</font> <br />
              房屋面积：<font color="#999999">50㎡</font>
            </td>
            <td>
              和女朋友一起住，空间刚好很不错，周边环境也好♥。 <br />
              <font color="#999999">{{datethree}}</font>
            </td>
          </tr>
          <tr valign="top">
            <td width="160"><img src="../images/peo3.jpg" width="20" height="20" align="absmiddle" />&nbsp;墨镜墨镜</td>
            <td width="180">
              房屋类型：<font color="#999999">两室两厅</font> <br />
              房屋面积：<font color="#999999">80㎡</font>
            </td>
            <td>
              我们一家三口在{{xtemp.name}}这边住很适合，大家都说很不错。<br />
              <font color="#999999">{{datetwo}}</font>
            </td>
          </tr>
          <tr valign="top">
            <td width="160"><img src="../images/peo4.jpg" width="20" height="20" align="absmiddle" />&nbsp;那*****洋
              <br />
              <font color="#999999">（匿名用户）</font>
            </td>
            <td width="180">
              房屋类型：<font color="#999999">单间</font> <br />
              房屋面积：<font color="#999999">20㎡</font>
            </td>
            <td>
              外出打工来这里租房经济适用，来这里还会来租的，推荐。<br />
              <font color="#999999">{{datefour}}</font>
            </td>
          </tr>
        </table>
      </div>

      <div id="footer">
        <div class="footer-wrap cw">
          <a href="#" class="fr question"><img class="v-middle" src="../images/login/comment.png">登陆页面，调查问卷</a>
          <div class="clear"></div>
          <div class="links fz0 text-center">
            <a href="#">关于我们</a>
            <a href="#">联系我们</a>
            <a href="#">人才招聘</a>
            <a href="regsmer.html">商家入驻</a>
            <a href="#">广告服务</a>
            <a href="#">友情链接</a>
            <a href="#">销售联盟</a>
            <a href="#">意见反馈</a>
            <a href="#">帮助中心</a>
            <a href="#">English Site</a>
          </div>
          <div class="copyright text-center" style="text-align-last: center;">惠民小家租房网 © 2018 彡小小家 粤ICP证4056801号</div>
        </div>
      </div>

    </div>

  </div>
</BODY>

</HTML>
<script>
  // 配置请求的基准URL地址

  
  //在前端页面中设置支持sesson共享
  //axios.defaults.withCredentials = true;

  var vue = new Vue({
    el: "#app",
    data: {
      title: '',
      videofile:null,
      contact: null,
      types: null,  //存放租房所有据的模型数据
      typeId:null,
      merid:null,
      brandNAME:'暂无',
      Sheng: {},
      Shengid: null,
      Shi: null,//市
      Zhen: null,//乡镇
      Xian: null,//区域
      stemp: {},//市名称
      xtemp:{},//xian
      ztemp:{},//镇
      sid: null,//市id
      xid: null,//县id
      zid: null,//乡镇id
      qid: null,//指定乡镇-->对应县id
      description: '',
      pfile: '',
      pubdate:null,
      price: null,
      floorage: null,
      path:'',
      uploadImg: [],//总图片集
      addImg:[],//图片集
      upImg:[],//上传新图片集
      arr:[],
      imgnames:false,
      i:-1,
      uploadvideo:[],
      mediaRecorder :null,
      hobj:{},
      uid:'null',
      myName:'请登录',
      id:null,
      message:null,
      good:null,
      dateone:null,
      datetwo:null,
      datethree:null,
      datefour:null,
      gghouses:null,//广告
      ggpname:null,
      guanzhumers:[],
        guanzhus:null,
        gzmerids:[],
        ulogo:'null',
        copyurl:null,
        nginxUrl:nginxUrl,
    },
    mounted: function () {
      this.dateone=fmtdate(new Date(),'yyyy-MM-dd');  
      this.datetwo=fmtdate(new Date(Date.now()-3600*1000),'yyyy-MM-dd');
      this.datethree=fmtdate(new Date(Date.now()-24*7*3600*1000),'yyyy-MM-dd');
      this.datefour=fmtdate(new Date(Date.now()-24*28*3600*1000),'yyyy-MM-dd');
      console.log(Date.parse(new Date())+this.datefour) 
              //获取用户信息
              
               //从localStorage对象中获取信息
    this.uid=localStorage.getItem('uid');
    console.log(this.uid+'```````````````')
    if(this.uid!='null'&&this.uid!='undefault'&&this.uid!=null){
     // axios.get('users/getUser').then((ret) => {
          //获取后台数据
         // this.myName = ret.data.data.name;
        //});
    
  //  }
  axios.get('users/getUserMESSAGE',{params:{'uid':this.uid}}).then((ret) => {
          //获取后台数据
          this.myName = ret.data.data.name;
        });
    //发送异步请求获取数据--加载ulogo
   
    axios.get('/getlogo',{params:{'uid':this.uid}}).then((ret) => {
          //获取后台数据
          this.ulogo = ret.data;

        });

         //加载收藏内容--关注
 axios.get('/getGz',{params:{'uid':this.uid}}).then((ret) => {
          //获取后台数据关注的[]
          this.guanzhus=ret.data;
          //获取商家id【】
          ret.data.forEach((item,index,arr)=>{
            console.log(item.merid+'......'+index+'='+this.guanzhus[0].merid)
            this.gzmerids.push(item.merid);
          })//去重
            Array.from(new Set(this.gzmerids)).forEach((item,index,arr)=>{
              //查名
              axios.get('/users/getUserMESSAGE',{params:{'uid':item}}).then((ret) => {
           this.guanzhumers.push(ret.data.data);
            
              })
          })

        });
    }
   
     //从localStorage对象中获取信息
     //var Hid=localStorage.getItem("Hid");this.id=Hid;
    this.copyurl=window.location.href;//当前网页路径
     this.id=this.copyurl.split('?id=')[1];
     var clipboard  = new Clipboard('.btn1,.btn2,.btn3,.btn4,.btn5', {  //启动
                //被复制的内容可以在这里进行配置，这时在复制按钮中就不需要写data-clipboard-* 等自定义属性
            });
      //alert("获取的id编号:"+id);
      axios.get('house/getUpdateHouse', {
          params: {   //表示给服务器传递的参数ret.data.data.pubdate+''
             id:this.id
          }
        }).then((ret) => {
            this.hobj=ret.data.data; 
            this.title=ret.data.data.title;
            this.typeId=ret.data.data.typeId;
            this.floorage=ret.data.data.floorage;
            this.price=ret.data.data.price;
            this.merid=ret.data.data.userId;
            axios.get('users/getUserMESSAGE',{params:{'uid':this.merid}}).then((ret) => {
          //获取后台数据
          this.brandNAME = ret.data.data.name;
        });
            this.zid=ret.data.data.jid;
            this.description=ret.data.data.description;
            this.contact=ret.data.data.contact;
            this.good=ret.data.data.goods;
            this.uploadvideo.push(this.nginxUrl+'videos/'+ret.data.data.video);
            this.arr=ret.data.data.path.split(',');
            console.log(ret.data.data.path.split(','))
            ret.data.data.path.split(',').forEach((item,index,arr)=>{             
             if(item!='null'&&item!=''){
                this.addImg.push(this.nginxUrl+item);
                this.uploadImg.push(this.nginxUrl+item);
              } 
                   
            })

   //加载镇
   axios.get('pubQU/pubPub', { params: { 'id': ret.data.data.jid} }).then((ret) => {
        //获取乡镇后台数据pid
        this.xid=ret.data.data.pid;
        this.ztemp=ret.data.data;
        axios.get('pubQU/pubPub', { params: { 'id': ret.data.data.pid } }).then((ret) => {
        //获取县后台数据pid       
        this.sid=ret.data.data.pid;
       this.xtemp=ret.data.data;
        axios.get('pubQU/pubPub', { params: { 'id': ret.data.data.pid} }).then((ret) => {
        //获取市后台数据pid
        this.stemp=ret.data.data;
        this.Shengid = ret.data.data.pid;
        axios.get('pubQU/pubPub', { params: { 'id': ret.data.data.pid} }).then((ret) => {
        //获取省后台数据
        this.Sheng = ret.data.data;  
      });      
  //加载市
  axios.get('pubQU/pubShi', { params: { 'pid': ret.data.data.pid } }).then((ret) => {
        this.Shi = ret.data.data;

        //加载县区域
        axios.get('pubQU/pubXian', { params: { 'pid': this.sid } }).then((ret) => {
          //获取后台数据
          this.Xian = ret.data.data;

          axios.get('pubQU/pubZhen', { params: { 'pid': this.xid } }).then((ret) => {
            //获取乡镇后台数据
            this.Zhen = ret.data.data;
          })
        })
      });
      });
      });
      });
        });
    //发送异步请求获取数据--户型
    axios.get('type/getTypeData').then((ret) => {
        //获取后台数据
        this.types = ret.data.data;
      });
   
     //调用后台api获取所有出租房---------广告
     var ggformData = new FormData();
            //给表单中添加页码属页 
       // ggformData.append("page", 1);
        ggformData.append('uid',1004) 
           axios.get('house/ggHouses',ggformData).then((ret) => {
          //获取后台数据
          this.gghouses = ret.data.data.list;
          //this.curpage = ret.data.data.curPage;  //获取当前页
         // this.pages = ret.data.data.totalPage;  //获取总页
          //this.qid=this.houses.pid;
          console.log(ret.data.data.list);
          ret.data.data.list.forEach((item, index, arr) => {
            //this.qid = item.pid;
            console.log(item.pid);
            //加载县区域名称
            axios.get('pubQU/pubPub', { params: { 'id': item.pid } }).then((ret) => {
              //获取后台数据
              item.ggpname = ret.data.data.name;
            })

          })

        });

        
    
    },
    methods: {
       //退出登录
       exitLogin:function(){
          axios.get('users/exitLogin').then((ret) => {
          //获取后台数据
          this.message= ret.data.message;
              if(ret.data.code==1){
                this.myName="请登录";
                localStorage.setItem('uid',null);
                localStorage.setItem('name','请登录');
                this.uid='null';
                //localStorage.setItem('userId',null);
                location.href="login.html"  //刷新页面
              }
        });
        },
        golist(){
          if(this.uid=='null'){
            localStorage.setItem("name",'请登录');
          }else{
            localStorage.setItem("name",this.myName);
          }
          open("list.html",null);
        },
        gomerlist(userid){
          if(this.uid=="null"){
            localStorage.setItem("uid",null);
            localStorage.setItem("name",'请登录');
            //localStorage.setItem('userId',userid);
          }
            localStorage.setItem("uid",this.uid);
            localStorage.setItem("name",this.myName);
            //localStorage.setItem('userId',userid);     
          
         open("merlist.html#?id="+userid,null);
        },
        tiaoDhtml:function(Hid){   //去详情   传递出租房编号
        //使用localStorage对象存储数据 setItem("键",值);
        //localStorage.setItem("Hid",Hid);
        if(this.myName=='请登录'){
          localStorage.setItem('uid',null);
        }else{
          localStorage.setItem('uid',this.uid);
        }
        
        open("details.html#?id="+Hid,null);  //跳转页面

      },
        goupdaeuser(userid){
          if(this.uid=="null"){
            localStorage.setItem("uid",null);
            localStorage.setItem("name",'请登录');
          }
            
            localStorage.setItem("userid",userid);
            open("updateuser.html",null,width="900", height="700");
          
          
        },
        //点赞图标变亮--goods+1
        ShowDivA:function(){
          $('.d_careA').hide();
          $('.d_careB').show();
          axios.get('house/upAddHousegoods',{params: {'id':this.id}}).then((ret) => {
        //获取后台数据
    alert("点赞成功！");
    axios.get('house/getHousegoods',{params: {'id':this.id}}).then((ret) => {
        //获取后台数据
         this.good=ret.data;
      });
    }) 
     
    //关注表添加记录
    var fm=new FormData();
    fm.append('uid',this.uid);
    fm.append('merid',this.merid);
    fm.append('id',this.id);
    fm.append('isok',1);
    
    console.log(this.guanzhu)
    axios.post('/addGz',fm).then((ret) => {
        //获取后台数据
      });

        },

         //点赞图标变白--goods-1
        ShowDivBB:function(){
          $('.d_careB').hide();
          $('.d_careA').show(); 
          axios.get('house/upMinusHousegoods',{params: {'id':this.id}}).then((ret) => {
        //获取后台数据
    alert("取消成功！");
    axios.get('house/getHousegoods',{params: {'id':this.id}}).then((ret) => {
        //获取后台数据
        this.good=ret.data;
      });        
    });

    //删除关注
    axios.get('/delGz',{params: {'uid':this.myName.id,'id':this.id}}).then((ret) => {
        //获取后台数据
      });
    },

    },
    updated(){
      //默认初始大图片
      if (typeof $('#tsImgSCon ul')[0].lastElementChild !== 'undefined'&&$('#tsImgSCon ul')[0].lastElementChild!= null) {
        $('#tsImgSCon ul')[0].lastElementChild.click();
      }
    }
  })


  function  fmtdate (ydate,fmt) {
              let date=new Date(ydate);
            if (/(y+)/.test(fmt)) {
              fmt = fmt.replace(RegExp.$1, (date.getFullYear() + '').substr(4 - RegExp.$1.length))
            }
            let o = {
              'M+': date.getMonth() + 1,
              'd+': date.getDate(),
              'h+': date.getHours(),
              'm+': date.getMinutes(),
              's+': date.getSeconds()
            }
            for (let k in o) {
              if (new RegExp(`(${k})`).test(fmt)) {
                let str = o[k] + ''
                fmt = fmt.replace(RegExp.$1, RegExp.$1.length === 1 ? str : ('00' + str).substr(str.length))
              }
            }
            return fmt
          }

          
</script>